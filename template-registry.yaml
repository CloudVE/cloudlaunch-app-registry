install_templates:
  projman:
    repo: cloudve
    chart: projman
    display_name: Projman
    summary: Project management
    icon_url: "https://upload.wikimedia.org/wikipedia/commons/6/60/Nextcloud_Logo.svg"
    screenshot_url: assets/images/screenshot_nextcloud.png
    context:
      starting_dir: '/gvl'
    template: |

      projectName: "{{context.project.namespace}}"
      data:
        project:
          name: "{{context.project.namespace}}-project-data"
          storageClass: "rclone"
          accessMode: "ReadWriteMany"
          size: 50Gi
          persistentVolume:
            extraSpec:
              csi:
                driver: csi-rclone
                volumeHandle: {{context.project.namespace}}-project-data-pv
                volumeAttributes:
                  remotePathSuffix: "/projects/{{context.project.namespace}}"
                  file-perms: "0777"
                  links: "true"
                  vfs-cache-mode: "full"
        public:
          name: "{{context.project.namespace}}-public-data"
          storageClass: "rclone"
          accessMode: "ReadWriteMany"
          size: 50Gi
          persistentVolume:
            extraSpec:
              csi:
                driver: csi-rclone
                volumeHandle: {{context.project.namespace}}-public-data-pv
                volumeAttributes:
                  remotePathSuffix: "/public"
                  file-perms: "0777"
                  links: "true"
                  vfs-cache-mode: "full"

      keycloak:
        namespace: keycloak
        clients:
          {{context.project.namespace}}:
            spec:
              realmSelector:
                matchLabels:
                  app: "gvl-sso"
              client:
                clientId: "projman-{{context.project.namespace}}"
                protocol: openid-connect
                enabled: true
                name: Client for project {{context.project.namespace}}
                publicClient: false
                standardFlowEnabled: true
                redirectUris:
                  - 'https://{{context.global.domain}}/{{context.project.access_path}}/*'

      configs:
        jupyter_notebook_config.py: |
          c.NotebookApp.notebook_dir = '{{context.starting_dir}}'

        rserver.conf: |
          rsession-which-r=/usr/local/bin/R
          auth-none=1
          www-frame-origin={{context.global.domain}}

        server.css: |
          #header .logo,
          #firstrunwizard .logo {
            background-image: url('../img/gvllogo.svg');
            width: 80px;
          }

        gvllogo.svg: |
          <?xml version="1.0" encoding="UTF-8" standalone="no"?>
          <!-- Generator: Adobe Illustrator 23.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->

          <svg
             xmlns:dc="http://purl.org/dc/elements/1.1/"
             xmlns:cc="http://creativecommons.org/ns#"
             xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
             xmlns:svg="http://www.w3.org/2000/svg"
             xmlns="http://www.w3.org/2000/svg"
             xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
             xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
             version="1.1"
             id="Layer_1"
             x="0px"
             y="0px"
             viewBox="0 0 516.36997 169.02"
             xml:space="preserve"
             sodipodi:docname="2018-gvl-logo-landscape-CMYK.svg"
             width="516.37"
             height="169.02"
             inkscape:version="0.92.2 5c3e80d, 2017-08-06"><metadata
               id="metadata84"><rdf:RDF><cc:Work
                   rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
                     rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs
               id="defs82" /><sodipodi:namedview
               pagecolor="#ffffff"
               bordercolor="#666666"
               borderopacity="1"
               objecttolerance="10"
               gridtolerance="10"
               guidetolerance="10"
               inkscape:pageopacity="0"
               inkscape:pageshadow="2"
               inkscape:window-width="1920"
               inkscape:window-height="1155"
               id="namedview80"
               showgrid="false"
               inkscape:pagecheckerboard="true"
               inkscape:zoom="1"
               inkscape:cx="-19.323699"
               inkscape:cy="-98.980458"
               inkscape:window-x="0"
               inkscape:window-y="1"
               inkscape:window-maximized="1"
               inkscape:current-layer="Layer_1" /><style
               type="text/css"
               id="style2">
            .st0{fill:#FFFFFF;}
            .st1{fill:#81848A;}
            .st2{fill:#27A2DB;}
            .st3{fill:url(#SVGID_1_);}
          </style><g
               id="g123"
               transform="translate(-38.969993,-213.13)"><g
                 id="g60"><g
                   id="g22"><path
                     id="path6"
                     d="m 223.23,301.57 c 0,7.5 -1.91,12.99 -5.71,16.47 -3.81,3.48 -9.65,5.22 -17.5,5.22 -2.88,0 -5.69,-0.24 -8.42,-0.72 -2.73,-0.48 -5.21,-1.11 -7.42,-1.89 l 1.98,-9.27 c 1.86,0.78 3.97,1.41 6.34,1.89 2.37,0.48 4.93,0.72 7.69,0.72 4.38,0 7.5,-0.9 9.36,-2.7 1.86,-1.8 2.79,-4.47 2.79,-8.01 v -1.8 c -1.08,0.54 -2.51,1.08 -4.28,1.62 -1.77,0.54 -3.79,0.81 -6.07,0.81 -3,0 -5.75,-0.48 -8.24,-1.44 -2.49,-0.96 -4.62,-2.37 -6.39,-4.23 -1.77,-1.86 -3.15,-4.19 -4.14,-6.98 -0.99,-2.79 -1.48,-6.01 -1.48,-9.67 0,-3.42 0.52,-6.57 1.57,-9.45 1.05,-2.88 2.58,-5.34 4.59,-7.38 2.01,-2.04 4.46,-3.63 7.33,-4.77 2.88,-1.14 6.15,-1.71 9.81,-1.71 3.54,0 6.9,0.27 10.08,0.81 3.18,0.54 5.88,1.11 8.1,1.71 v 40.77 z M 192.9,281.59 c 0,4.62 1,8 3.01,10.12 2.01,2.13 4.6,3.19 7.79,3.19 1.74,0 3.38,-0.24 4.9,-0.72 1.53,-0.48 2.78,-1.05 3.74,-1.71 v -24.39 c -0.78,-0.18 -1.74,-0.34 -2.88,-0.5 -1.14,-0.15 -2.58,-0.23 -4.32,-0.23 -3.96,0 -6.99,1.31 -9.09,3.92 -2.1,2.62 -3.15,6.06 -3.15,10.32 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /><path
                     id="path8"
                     d="m 232.23,283.03 c 0,-4.14 0.61,-7.77 1.84,-10.89 1.23,-3.12 2.86,-5.71 4.91,-7.78 2.04,-2.07 4.38,-3.63 7.02,-4.68 2.64,-1.05 5.34,-1.58 8.1,-1.58 6.48,0 11.53,2.01 15.17,6.03 3.63,4.02 5.44,10.02 5.44,18 0,0.6 -0.02,1.28 -0.04,2.02 -0.03,0.75 -0.08,1.43 -0.13,2.02 h -31.05 c 0.3,3.78 1.63,6.71 4,8.78 2.37,2.07 5.8,3.1 10.3,3.1 2.64,0 5.05,-0.24 7.25,-0.72 2.19,-0.48 3.92,-0.99 5.17,-1.53 l 1.44,8.91 c -0.6,0.3 -1.43,0.62 -2.48,0.95 -1.05,0.33 -2.25,0.63 -3.6,0.9 -1.35,0.27 -2.81,0.5 -4.37,0.67 -1.56,0.18 -3.15,0.27 -4.77,0.27 -4.14,0 -7.74,-0.62 -10.8,-1.84 -3.06,-1.23 -5.58,-2.94 -7.56,-5.13 -1.98,-2.19 -3.45,-4.77 -4.41,-7.74 -0.95,-2.97 -1.43,-6.22 -1.43,-9.76 z m 31.59,-4.86 c 0,-1.5 -0.21,-2.93 -0.63,-4.27 -0.42,-1.35 -1.04,-2.52 -1.85,-3.51 -0.81,-0.99 -1.8,-1.77 -2.97,-2.34 -1.17,-0.57 -2.56,-0.85 -4.18,-0.85 -1.68,0 -3.15,0.31 -4.41,0.94 -1.26,0.63 -2.33,1.46 -3.2,2.48 -0.87,1.02 -1.54,2.19 -2.02,3.51 -0.48,1.32 -0.81,2.67 -0.99,4.05 h 20.25 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /><path
                     id="path10"
                     d="m 283.98,260.8 c 2.1,-0.6 4.83,-1.17 8.19,-1.71 3.36,-0.54 7.08,-0.81 11.16,-0.81 3.84,0 7.05,0.53 9.63,1.58 2.58,1.05 4.63,2.52 6.17,4.41 1.53,1.89 2.61,4.17 3.24,6.84 0.63,2.67 0.94,5.6 0.94,8.77 v 26.46 h -10.89 v -24.75 c 0,-2.52 -0.17,-4.66 -0.5,-6.44 -0.33,-1.77 -0.87,-3.21 -1.62,-4.32 -0.75,-1.11 -1.77,-1.92 -3.06,-2.43 -1.29,-0.51 -2.87,-0.77 -4.73,-0.77 -1.38,0 -2.82,0.09 -4.32,0.27 -1.5,0.18 -2.61,0.33 -3.33,0.45 v 37.98 H 283.97 V 260.8 Z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /><path
                     id="path12"
                     d="m 376.95,282.76 c 0,3.72 -0.54,7.11 -1.62,10.17 -1.08,3.06 -2.61,5.67 -4.59,7.83 -1.98,2.16 -4.37,3.84 -7.16,5.04 -2.79,1.2 -5.87,1.8 -9.22,1.8 -3.36,0 -6.42,-0.6 -9.18,-1.8 -2.76,-1.2 -5.13,-2.88 -7.11,-5.04 -1.98,-2.16 -3.53,-4.77 -4.63,-7.83 -1.11,-3.06 -1.67,-6.45 -1.67,-10.17 0,-3.72 0.55,-7.09 1.67,-10.12 1.11,-3.03 2.67,-5.62 4.68,-7.79 2.01,-2.16 4.39,-3.82 7.16,-4.99 2.76,-1.17 5.79,-1.76 9.09,-1.76 3.3,0 6.34,0.59 9.13,1.76 2.79,1.17 5.17,2.83 7.16,4.99 1.98,2.16 3.52,4.76 4.63,7.79 1.11,3.02 1.66,6.4 1.66,10.12 z m -11.16,0 c 0,-4.68 -1,-8.38 -3.01,-11.11 -2.01,-2.73 -4.82,-4.1 -8.42,-4.1 -3.6,0 -6.41,1.37 -8.42,4.1 -2.01,2.73 -3.01,6.44 -3.01,11.11 0,4.74 1,8.49 3.01,11.25 2.01,2.76 4.81,4.14 8.42,4.14 3.6,0 6.4,-1.38 8.42,-4.14 2.01,-2.76 3.01,-6.51 3.01,-11.25 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /><path
                     id="path14"
                     d="m 412.77,281.59 c 0,-4.92 -0.62,-8.47 -1.84,-10.67 -1.23,-2.19 -3.53,-3.29 -6.89,-3.29 -1.2,0 -2.52,0.09 -3.96,0.27 -1.44,0.18 -2.52,0.33 -3.24,0.45 v 37.98 H 385.95 V 260.8 c 2.1,-0.6 4.84,-1.17 8.24,-1.71 3.39,-0.54 6.97,-0.81 10.75,-0.81 3.24,0 5.9,0.42 7.96,1.26 2.07,0.84 3.79,1.95 5.17,3.33 0.66,-0.48 1.5,-0.99 2.52,-1.53 1.02,-0.54 2.16,-1.04 3.42,-1.48 1.26,-0.45 2.59,-0.82 4,-1.12 1.41,-0.3 2.83,-0.45 4.28,-0.45 3.66,0 6.67,0.53 9.04,1.58 2.37,1.05 4.23,2.52 5.58,4.41 1.35,1.89 2.28,4.17 2.79,6.84 0.51,2.67 0.76,5.6 0.76,8.77 v 26.46 H 439.57 V 281.6 c 0,-4.92 -0.6,-8.47 -1.8,-10.67 -1.2,-2.19 -3.51,-3.29 -6.93,-3.29 -1.74,0 -3.39,0.29 -4.95,0.85 -1.56,0.57 -2.73,1.12 -3.51,1.67 0.48,1.5 0.81,3.09 0.99,4.77 0.18,1.68 0.27,3.48 0.27,5.4 v 26.01 h -10.89 v -24.75 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /><path
                     id="path16"
                     d="m 473.7,245.5 c 0,2.04 -0.66,3.66 -1.98,4.86 -1.32,1.2 -2.88,1.8 -4.68,1.8 -1.86,0 -3.45,-0.6 -4.77,-1.8 -1.32,-1.2 -1.98,-2.82 -1.98,-4.86 0,-2.1 0.66,-3.75 1.98,-4.95 1.32,-1.2 2.91,-1.8 4.77,-1.8 1.8,0 3.36,0.6 4.68,1.8 1.32,1.2 1.98,2.85 1.98,4.95 z m -1.17,60.84 h -10.89 v -47.07 h 10.89 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /><path
                     id="path18"
                     d="m 481.53,282.85 c 0,-3.48 0.54,-6.73 1.62,-9.76 1.08,-3.03 2.62,-5.65 4.63,-7.88 2.01,-2.22 4.46,-3.96 7.33,-5.22 2.88,-1.26 6.12,-1.89 9.72,-1.89 4.44,0 8.64,0.81 12.6,2.43 l -2.34,8.91 c -1.26,-0.54 -2.69,-0.99 -4.27,-1.35 -1.59,-0.36 -3.29,-0.54 -5.08,-0.54 -4.26,0 -7.5,1.34 -9.72,4 -2.22,2.67 -3.33,6.44 -3.33,11.29 0,4.68 1.05,8.39 3.15,11.12 2.1,2.73 5.64,4.1 10.62,4.1 1.86,0 3.69,-0.18 5.49,-0.54 1.8,-0.36 3.36,-0.81 4.68,-1.35 l 1.53,9 c -1.2,0.6 -3.02,1.14 -5.45,1.62 -2.43,0.48 -4.94,0.72 -7.51,0.72 -4.02,0 -7.52,-0.62 -10.49,-1.84 -2.97,-1.22 -5.43,-2.94 -7.38,-5.13 -1.95,-2.19 -3.41,-4.8 -4.37,-7.83 -0.95,-3.04 -1.43,-6.32 -1.43,-9.86 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /><path
                     id="path20"
                     d="m 536.16,298.51 c 2.88,0 4.98,-0.34 6.3,-1.04 1.32,-0.69 1.98,-1.87 1.98,-3.55 0,-1.56 -0.71,-2.85 -2.12,-3.87 -1.41,-1.02 -3.73,-2.13 -6.97,-3.33 -1.98,-0.72 -3.8,-1.48 -5.45,-2.29 -1.65,-0.81 -3.08,-1.75 -4.27,-2.83 -1.2,-1.08 -2.15,-2.38 -2.83,-3.92 -0.69,-1.53 -1.04,-3.4 -1.04,-5.62 0,-4.32 1.59,-7.72 4.77,-10.21 3.18,-2.49 7.5,-3.74 12.96,-3.74 2.76,0 5.4,0.26 7.92,0.77 2.52,0.51 4.41,1.01 5.67,1.48 l -1.98,8.82 c -1.2,-0.54 -2.73,-1.04 -4.59,-1.48 -1.86,-0.45 -4.02,-0.68 -6.48,-0.68 -2.22,0 -4.02,0.38 -5.4,1.12 -1.38,0.75 -2.07,1.91 -2.07,3.46 0,0.78 0.13,1.47 0.41,2.07 0.27,0.6 0.73,1.16 1.39,1.67 0.66,0.51 1.53,1.02 2.61,1.53 1.08,0.51 2.4,1.04 3.96,1.58 2.58,0.96 4.77,1.91 6.57,2.83 1.8,0.93 3.29,1.98 4.46,3.15 1.17,1.17 2.03,2.51 2.57,4 0.54,1.5 0.81,3.3 0.81,5.4 0,4.5 -1.67,7.91 -5,10.21 -3.33,2.31 -8.09,3.46 -14.26,3.46 -4.14,0 -7.47,-0.35 -9.99,-1.04 -2.52,-0.69 -4.29,-1.24 -5.31,-1.66 l 1.89,-9.09 c 1.62,0.66 3.56,1.29 5.81,1.89 2.23,0.61 4.8,0.91 7.68,0.91 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /></g><g
                   id="g58"><path
                     id="path24"
                     d="m 291.1,336.55 c -1.11,-2.28 -2.25,-4.89 -3.41,-7.84 -1.17,-2.95 -2.23,-6.12 -3.18,-9.5 h 4.28 c 0.24,0.97 0.53,2.02 0.85,3.13 0.32,1.12 0.67,2.23 1.03,3.35 0.37,1.12 0.74,2.2 1.13,3.25 0.39,1.05 0.75,2 1.08,2.83 0.33,-0.84 0.69,-1.78 1.06,-2.83 0.38,-1.05 0.75,-2.13 1.12,-3.25 0.37,-1.12 0.72,-2.23 1.05,-3.35 0.33,-1.12 0.62,-2.16 0.87,-3.13 h 4.15 c -0.95,3.38 -2.01,6.55 -3.18,9.5 -1.17,2.95 -2.3,5.57 -3.41,7.84 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path26"
                     d="m 308.54,314.13 c 0,0.75 -0.24,1.35 -0.73,1.79 -0.49,0.44 -1.06,0.66 -1.72,0.66 -0.69,0 -1.27,-0.22 -1.76,-0.66 -0.49,-0.44 -0.73,-1.04 -0.73,-1.79 0,-0.77 0.24,-1.38 0.73,-1.82 0.49,-0.44 1.07,-0.66 1.76,-0.66 0.66,0 1.24,0.22 1.72,0.66 0.48,0.44 0.73,1.05 0.73,1.82 z m -0.43,22.42 h -4.01 v -17.34 h 4.01 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path28"
                     d="m 323.1,322.82 c -0.33,-0.11 -0.79,-0.23 -1.38,-0.35 -0.59,-0.12 -1.27,-0.18 -2.04,-0.18 -0.44,0 -0.91,0.04 -1.41,0.13 -0.5,0.09 -0.85,0.17 -1.04,0.23 v 13.89 h -4.01 v -16.51 c 0.77,-0.29 1.74,-0.56 2.9,-0.81 1.16,-0.25 2.45,-0.38 3.86,-0.38 0.27,0 0.57,0.02 0.93,0.05 0.35,0.03 0.71,0.08 1.06,0.13 0.35,0.06 0.7,0.12 1.03,0.2 0.33,0.08 0.6,0.15 0.8,0.21 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path30"
                     d="m 326.38,314.63 4.01,-0.66 v 5.24 h 6.17 v 3.35 h -6.17 v 7.06 c 0,1.39 0.22,2.39 0.66,2.98 0.44,0.6 1.19,0.9 2.25,0.9 0.73,0 1.38,-0.08 1.94,-0.23 0.56,-0.15 1.01,-0.3 1.34,-0.43 l 0.66,3.18 c -0.46,0.2 -1.07,0.4 -1.82,0.61 -0.75,0.21 -1.64,0.31 -2.65,0.31 -1.24,0 -2.27,-0.17 -3.1,-0.5 -0.83,-0.33 -1.49,-0.81 -1.97,-1.44 -0.48,-0.63 -0.83,-1.39 -1.03,-2.29 -0.2,-0.9 -0.3,-1.92 -0.3,-3.07 v -15.01 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path32"
                     d="m 354.67,336.02 c -0.77,0.2 -1.78,0.4 -3.02,0.61 -1.24,0.21 -2.6,0.31 -4.08,0.31 -1.39,0 -2.56,-0.2 -3.5,-0.6 -0.94,-0.4 -1.69,-0.95 -2.25,-1.66 -0.56,-0.71 -0.97,-1.55 -1.21,-2.54 -0.24,-0.99 -0.36,-2.06 -0.36,-3.23 v -9.72 h 4.01 v 9.09 c 0,1.86 0.27,3.18 0.81,3.98 0.54,0.8 1.49,1.19 2.83,1.19 0.49,0 1,-0.02 1.54,-0.07 0.54,-0.04 0.95,-0.1 1.21,-0.17 v -14.03 h 4.01 v 16.84 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path34"
                     d="m 365.55,318.77 c 1.33,0 2.44,0.17 3.35,0.5 0.91,0.33 1.63,0.8 2.17,1.39 0.54,0.59 0.93,1.32 1.16,2.17 0.23,0.85 0.35,1.79 0.35,2.8 v 10.51 c -0.62,0.13 -1.55,0.29 -2.8,0.48 -1.25,0.19 -2.66,0.28 -4.23,0.28 -1.04,0 -1.99,-0.1 -2.85,-0.3 -0.86,-0.2 -1.6,-0.52 -2.21,-0.96 -0.61,-0.44 -1.08,-1.02 -1.43,-1.72 -0.34,-0.71 -0.51,-1.58 -0.51,-2.62 0,-1 0.19,-1.83 0.58,-2.52 0.39,-0.68 0.91,-1.24 1.57,-1.67 0.66,-0.43 1.43,-0.74 2.31,-0.93 0.87,-0.19 1.78,-0.28 2.74,-0.28 0.44,0 0.91,0.03 1.39,0.08 0.49,0.06 1.01,0.15 1.56,0.28 v -0.66 c 0,-0.46 -0.06,-0.91 -0.17,-1.33 -0.11,-0.42 -0.3,-0.79 -0.58,-1.11 -0.28,-0.32 -0.64,-0.57 -1.09,-0.75 -0.45,-0.18 -1.02,-0.27 -1.71,-0.27 -0.93,0 -1.78,0.07 -2.55,0.2 -0.77,0.13 -1.4,0.29 -1.89,0.46 l -0.5,-3.25 c 0.51,-0.18 1.25,-0.35 2.22,-0.53 0.97,-0.18 2.01,-0.25 3.12,-0.25 z m 0.33,14.96 c 1.24,0 2.18,-0.07 2.82,-0.2 v -4.44 c -0.22,-0.07 -0.54,-0.13 -0.96,-0.2 -0.42,-0.07 -0.88,-0.1 -1.39,-0.1 -0.44,0 -0.89,0.03 -1.34,0.1 -0.45,0.07 -0.86,0.19 -1.23,0.37 -0.37,0.18 -0.66,0.43 -0.88,0.75 -0.22,0.32 -0.33,0.72 -0.33,1.21 0,0.95 0.3,1.61 0.9,1.97 0.59,0.36 1.39,0.54 2.41,0.54 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path36"
                     d="m 383.52,336.88 c -1.19,-0.02 -2.18,-0.16 -2.97,-0.4 -0.79,-0.24 -1.41,-0.59 -1.87,-1.04 -0.46,-0.45 -0.79,-1.02 -0.98,-1.69 -0.19,-0.67 -0.28,-1.44 -0.28,-2.3 v -19.96 l 4.01,-0.66 v 19.86 c 0,0.49 0.04,0.9 0.12,1.23 0.08,0.33 0.22,0.61 0.42,0.85 0.2,0.24 0.47,0.41 0.81,0.53 0.34,0.12 0.78,0.22 1.31,0.28 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path38"
                     d="m 401.1,336.88 c -1.19,-0.02 -2.18,-0.16 -2.97,-0.4 -0.79,-0.24 -1.41,-0.59 -1.87,-1.04 -0.46,-0.45 -0.79,-1.02 -0.98,-1.69 -0.19,-0.67 -0.28,-1.44 -0.28,-2.3 v -19.96 l 4.01,-0.66 v 19.86 c 0,0.49 0.04,0.9 0.12,1.23 0.08,0.33 0.22,0.61 0.42,0.85 0.2,0.24 0.47,0.41 0.81,0.53 0.34,0.12 0.78,0.22 1.31,0.28 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path40"
                     d="m 410.68,318.77 c 1.33,0 2.44,0.17 3.35,0.5 0.91,0.33 1.63,0.8 2.17,1.39 0.54,0.59 0.93,1.32 1.16,2.17 0.23,0.85 0.35,1.79 0.35,2.8 v 10.51 c -0.62,0.13 -1.55,0.29 -2.8,0.48 -1.25,0.19 -2.66,0.28 -4.23,0.28 -1.04,0 -1.99,-0.1 -2.85,-0.3 -0.86,-0.2 -1.6,-0.52 -2.21,-0.96 -0.61,-0.44 -1.08,-1.02 -1.43,-1.72 -0.34,-0.71 -0.51,-1.58 -0.51,-2.62 0,-1 0.19,-1.83 0.58,-2.52 0.39,-0.68 0.91,-1.24 1.57,-1.67 0.66,-0.43 1.43,-0.74 2.31,-0.93 0.87,-0.19 1.78,-0.28 2.74,-0.28 0.44,0 0.91,0.03 1.39,0.08 0.49,0.06 1.01,0.15 1.56,0.28 v -0.66 c 0,-0.46 -0.06,-0.91 -0.17,-1.33 -0.11,-0.42 -0.3,-0.79 -0.58,-1.11 -0.28,-0.32 -0.64,-0.57 -1.09,-0.75 -0.45,-0.18 -1.02,-0.27 -1.71,-0.27 -0.93,0 -1.78,0.07 -2.55,0.2 -0.77,0.13 -1.4,0.29 -1.89,0.46 l -0.5,-3.25 c 0.51,-0.18 1.25,-0.35 2.22,-0.53 0.97,-0.18 2.01,-0.25 3.12,-0.25 z m 0.33,14.96 c 1.24,0 2.18,-0.07 2.82,-0.2 v -4.44 c -0.22,-0.07 -0.54,-0.13 -0.96,-0.2 -0.42,-0.07 -0.88,-0.1 -1.39,-0.1 -0.44,0 -0.89,0.03 -1.34,0.1 -0.45,0.07 -0.86,0.19 -1.23,0.37 -0.37,0.18 -0.66,0.43 -0.88,0.75 -0.22,0.32 -0.33,0.72 -0.33,1.21 0,0.95 0.3,1.61 0.9,1.97 0.59,0.36 1.39,0.54 2.41,0.54 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path42"
                     d="m 438.24,327.89 c 0,1.39 -0.2,2.65 -0.61,3.76 -0.41,1.11 -0.99,2.07 -1.76,2.87 -0.77,0.8 -1.69,1.4 -2.77,1.82 -1.08,0.42 -2.31,0.63 -3.68,0.63 -1.33,0 -2.59,-0.1 -3.8,-0.3 -1.21,-0.2 -2.21,-0.42 -3,-0.66 v -24.54 l 4.01,-0.66 v 8.99 c 0.46,-0.24 1.03,-0.46 1.71,-0.66 0.68,-0.2 1.42,-0.3 2.24,-0.3 1.22,0 2.3,0.22 3.27,0.65 0.96,0.43 1.76,1.04 2.4,1.84 0.64,0.8 1.13,1.75 1.48,2.87 0.34,1.11 0.51,2.34 0.51,3.69 z m -4.12,-0.06 c 0,-1.7 -0.34,-3.05 -1.01,-4.05 -0.67,-1 -1.74,-1.49 -3.2,-1.49 -0.66,0 -1.29,0.1 -1.87,0.3 -0.59,0.2 -1.06,0.42 -1.41,0.66 v 9.98 c 0.29,0.07 0.66,0.13 1.11,0.18 0.45,0.06 1,0.08 1.64,0.08 1.48,0 2.64,-0.5 3.48,-1.51 0.84,-1.01 1.26,-2.38 1.26,-4.15 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path44"
                     d="m 458.07,327.86 c 0,1.37 -0.2,2.62 -0.6,3.75 -0.4,1.13 -0.96,2.09 -1.69,2.88 -0.73,0.79 -1.61,1.42 -2.64,1.86 -1.03,0.44 -2.16,0.66 -3.4,0.66 -1.24,0 -2.37,-0.22 -3.38,-0.66 -1.02,-0.44 -1.89,-1.06 -2.62,-1.86 -0.73,-0.8 -1.3,-1.76 -1.71,-2.88 -0.41,-1.13 -0.61,-2.38 -0.61,-3.75 0,-1.37 0.2,-2.61 0.61,-3.73 0.41,-1.12 0.98,-2.07 1.72,-2.87 0.74,-0.8 1.62,-1.41 2.64,-1.84 1.02,-0.43 2.13,-0.65 3.35,-0.65 1.22,0 2.34,0.22 3.37,0.65 1.03,0.43 1.91,1.04 2.64,1.84 0.73,0.8 1.3,1.75 1.71,2.87 0.4,1.12 0.61,2.36 0.61,3.73 z m -4.11,0 c 0,-1.72 -0.37,-3.09 -1.11,-4.1 -0.74,-1.01 -1.77,-1.51 -3.1,-1.51 -1.33,0 -2.36,0.5 -3.1,1.51 -0.74,1.01 -1.11,2.37 -1.11,4.1 0,1.75 0.37,3.13 1.11,4.14 0.74,1.02 1.77,1.53 3.1,1.53 1.33,0 2.36,-0.51 3.1,-1.53 0.73,-1.01 1.11,-2.39 1.11,-4.14 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path46"
                     d="m 472.09,322.82 c -0.33,-0.11 -0.79,-0.23 -1.38,-0.35 -0.59,-0.12 -1.27,-0.18 -2.04,-0.18 -0.44,0 -0.91,0.04 -1.41,0.13 -0.5,0.09 -0.85,0.17 -1.04,0.23 v 13.89 h -4.01 v -16.51 c 0.77,-0.29 1.74,-0.56 2.9,-0.81 1.16,-0.25 2.45,-0.38 3.86,-0.38 0.27,0 0.57,0.02 0.93,0.05 0.35,0.03 0.71,0.08 1.06,0.13 0.35,0.06 0.7,0.12 1.03,0.2 0.33,0.08 0.6,0.15 0.8,0.21 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path48"
                     d="m 481.35,318.77 c 1.33,0 2.44,0.17 3.35,0.5 0.91,0.33 1.63,0.8 2.17,1.39 0.54,0.59 0.93,1.32 1.16,2.17 0.23,0.85 0.35,1.79 0.35,2.8 v 10.51 c -0.62,0.13 -1.55,0.29 -2.8,0.48 -1.25,0.19 -2.66,0.28 -4.23,0.28 -1.04,0 -1.99,-0.1 -2.85,-0.3 -0.86,-0.2 -1.6,-0.52 -2.21,-0.96 -0.61,-0.44 -1.08,-1.02 -1.43,-1.72 -0.34,-0.71 -0.51,-1.58 -0.51,-2.62 0,-1 0.19,-1.83 0.58,-2.52 0.39,-0.68 0.91,-1.24 1.57,-1.67 0.66,-0.43 1.43,-0.74 2.31,-0.93 0.87,-0.19 1.78,-0.28 2.74,-0.28 0.44,0 0.91,0.03 1.39,0.08 0.49,0.06 1.01,0.15 1.56,0.28 v -0.66 c 0,-0.46 -0.06,-0.91 -0.17,-1.33 -0.11,-0.42 -0.3,-0.79 -0.58,-1.11 -0.28,-0.32 -0.64,-0.57 -1.09,-0.75 -0.45,-0.18 -1.02,-0.27 -1.71,-0.27 -0.93,0 -1.78,0.07 -2.55,0.2 -0.77,0.13 -1.4,0.29 -1.89,0.46 l -0.5,-3.25 c 0.51,-0.18 1.25,-0.35 2.22,-0.53 0.97,-0.18 2.01,-0.25 3.12,-0.25 z m 0.33,14.96 c 1.24,0 2.18,-0.07 2.82,-0.2 v -4.44 c -0.22,-0.07 -0.54,-0.13 -0.96,-0.2 -0.42,-0.07 -0.88,-0.1 -1.39,-0.1 -0.44,0 -0.89,0.03 -1.34,0.1 -0.45,0.07 -0.86,0.19 -1.23,0.37 -0.37,0.18 -0.66,0.43 -0.88,0.75 -0.22,0.32 -0.33,0.72 -0.33,1.21 0,0.95 0.3,1.61 0.9,1.97 0.58,0.36 1.39,0.54 2.41,0.54 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path50"
                     d="m 493.08,314.63 4.01,-0.66 v 5.24 h 6.17 v 3.35 h -6.17 v 7.06 c 0,1.39 0.22,2.39 0.66,2.98 0.44,0.6 1.19,0.9 2.25,0.9 0.73,0 1.38,-0.08 1.94,-0.23 0.56,-0.15 1.01,-0.3 1.34,-0.43 l 0.66,3.18 c -0.46,0.2 -1.07,0.4 -1.82,0.61 -0.75,0.21 -1.64,0.31 -2.65,0.31 -1.24,0 -2.27,-0.17 -3.1,-0.5 -0.83,-0.33 -1.49,-0.81 -1.97,-1.44 -0.48,-0.63 -0.83,-1.39 -1.03,-2.29 -0.2,-0.9 -0.3,-1.92 -0.3,-3.07 v -15.01 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path52"
                     d="m 522.83,327.86 c 0,1.37 -0.2,2.62 -0.6,3.75 -0.4,1.13 -0.96,2.09 -1.69,2.88 -0.73,0.79 -1.61,1.42 -2.64,1.86 -1.03,0.44 -2.16,0.66 -3.4,0.66 -1.24,0 -2.37,-0.22 -3.38,-0.66 -1.02,-0.44 -1.89,-1.06 -2.62,-1.86 -0.73,-0.8 -1.3,-1.76 -1.71,-2.88 -0.41,-1.13 -0.61,-2.38 -0.61,-3.75 0,-1.37 0.2,-2.61 0.61,-3.73 0.41,-1.12 0.98,-2.07 1.72,-2.87 0.74,-0.8 1.62,-1.41 2.64,-1.84 1.02,-0.43 2.13,-0.65 3.35,-0.65 1.22,0 2.34,0.22 3.37,0.65 1.03,0.43 1.91,1.04 2.64,1.84 0.73,0.8 1.3,1.75 1.71,2.87 0.4,1.12 0.61,2.36 0.61,3.73 z m -4.11,0 c 0,-1.72 -0.37,-3.09 -1.11,-4.1 -0.74,-1.01 -1.77,-1.51 -3.1,-1.51 -1.33,0 -2.36,0.5 -3.1,1.51 -0.74,1.01 -1.11,2.37 -1.11,4.1 0,1.75 0.37,3.13 1.11,4.14 0.74,1.02 1.77,1.53 3.1,1.53 1.33,0 2.36,-0.51 3.1,-1.53 0.74,-1.01 1.11,-2.39 1.11,-4.14 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path54"
                     d="m 536.86,322.82 c -0.33,-0.11 -0.79,-0.23 -1.38,-0.35 -0.59,-0.12 -1.27,-0.18 -2.04,-0.18 -0.44,0 -0.91,0.04 -1.41,0.13 -0.5,0.09 -0.85,0.17 -1.04,0.23 v 13.89 h -4.01 v -16.51 c 0.77,-0.29 1.74,-0.56 2.9,-0.81 1.16,-0.25 2.45,-0.38 3.86,-0.38 0.27,0 0.57,0.02 0.93,0.05 0.35,0.03 0.71,0.08 1.06,0.13 0.35,0.06 0.7,0.12 1.03,0.2 0.33,0.08 0.6,0.15 0.8,0.21 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /><path
                     id="path56"
                     d="m 554.5,319.21 c -1.79,6.59 -3.86,12.56 -6.22,17.91 -0.44,1 -0.9,1.85 -1.36,2.55 -0.46,0.71 -0.98,1.29 -1.56,1.76 -0.58,0.46 -1.22,0.8 -1.93,1.01 -0.71,0.21 -1.53,0.32 -2.46,0.32 -0.62,0 -1.23,-0.07 -1.84,-0.2 -0.61,-0.13 -1.07,-0.28 -1.38,-0.43 l 0.73,-3.22 c 0.8,0.31 1.59,0.46 2.37,0.46 1.04,0 1.86,-0.25 2.45,-0.75 0.59,-0.5 1.1,-1.27 1.55,-2.3 -1.27,-2.43 -2.48,-5.08 -3.65,-7.96 -1.17,-2.88 -2.2,-5.92 -3.11,-9.15 h 4.28 c 0.22,0.93 0.49,1.93 0.82,3.02 0.33,1.09 0.67,2.18 1.05,3.3 0.38,1.12 0.78,2.23 1.2,3.33 0.42,1.1 0.84,2.13 1.26,3.08 0.71,-1.97 1.36,-4.06 1.98,-6.28 0.62,-2.22 1.18,-4.37 1.68,-6.45 z"
                     class="st2"
                     inkscape:connector-curvature="0"
                     style="fill:#27a2db" /></g></g><g
                 id="g73"><path
                   id="path62"
                   d="m 115.79,268.35 c 0,0 16.9,14.39 -16.73,50.04 -33.64,35.64 -3.85,60.91 4.85,63.76 0,0 -20.92,-13.56 15.06,-52.38 35.98,-38.83 -3.18,-61.42 -3.18,-61.42 z"
                   class="st2"
                   inkscape:connector-curvature="0"
                   style="fill:#27a2db" /><path
                   id="path64"
                   d="m 96.72,213.13 c 0,0 16.9,14.39 -16.73,50.04 -33.64,35.64 -3.85,60.91 4.85,63.76 0,0 -20.92,-13.55 15.06,-52.38 35.97,-38.83 -3.18,-61.42 -3.18,-61.42 z"
                   class="st2"
                   inkscape:connector-curvature="0"
                   style="fill:#27a2db" /><linearGradient
                   gradientTransform="matrix(-1,0,0,1,233.7066,0)"
                   y2="296.5618"
                   x2="151.9006"
                   y1="296.5618"
                   x1="116.6832"
                   gradientUnits="userSpaceOnUse"
                   id="SVGID_1_"><stop
                     id="stop66"
                     style="stop-color:#F5AA1C"
                     offset="0.25" /><stop
                     id="stop68"
                     style="stop-color:#F15827"
                     offset="1" /></linearGradient><path
                   id="path71"
                   d="m 106.07,272.02 10.95,8.33 c -0.02,1.49 -0.21,3.19 -0.64,5.12 l -13.21,-10.04 c 1.02,-1.14 1.99,-2.28 2.9,-3.41 z m -8.6,9.81 15.85,12.05 c 0.73,-1.49 1.33,-2.9 1.81,-4.23 l -14.72,-11.2 c -1.04,1.15 -2.02,2.28 -2.94,3.38 z m -5.28,6.71 16.82,12.79 c 0.88,-1.32 1.67,-2.59 2.37,-3.81 l -16.5,-12.54 c -0.96,1.23 -1.86,2.41 -2.69,3.56 z m -4.68,7.18 16.44,12.5 c 0.98,-1.21 1.88,-2.39 2.72,-3.54 L 89.86,291.9 c -0.87,1.32 -1.65,2.6 -2.35,3.82 z m -3.76,7.88 14.61,11.1 c 1.05,-1.14 2.04,-2.26 2.98,-3.35 L 85.57,299.36 c -0.72,1.5 -1.32,2.91 -1.82,4.24 z m -1.94,9.25 10.86,8.25 c 0.91,-1.12 1.88,-2.25 2.92,-3.39 L 82.5,307.76 c -0.45,1.9 -0.66,3.59 -0.69,5.09 z"
                   class="st3"
                   inkscape:connector-curvature="0"
                   style="fill:url(#SVGID_1_)" /></g><path
                 id="path75"
                 d="m 137.85,344.01 c 5.97,0 10.83,-4.86 10.83,-10.83 v -75.89 c 0,-5.97 -4.86,-10.83 -10.83,-10.83 h -19.99 c 0.52,-4.48 0.03,-8.54 -1.08,-12.17 h 21.06 c 12.65,0 23,10.35 23,23 v 75.89 c 0,12.65 -10.35,23 -23,23 h -34.13 c 1.49,-3.62 3.68,-7.66 6.78,-12.17 z"
                 class="st1"
                 inkscape:connector-curvature="0"
                 style="fill:#81848a" /><path
                 id="path77"
                 d="m 61.96,234.29 h 34.63 c -1.18,3.56 -3.09,7.61 -5.99,12.17 H 61.96 c -5.97,0 -10.83,4.86 -10.83,10.83 v 75.89 c 0,5.97 4.86,10.83 10.83,10.83 h 19.63 c -0.93,4.37 -0.95,8.44 -0.32,12.17 h -19.3 c -12.65,0 -23,-10.35 -23,-23 v -75.89 c -0.01,-12.65 10.34,-23 22.99,-23 z"
                 class="st1"
                 inkscape:connector-curvature="0"
                 style="fill:#81848a" /></g></svg>


  galaxy:
    repo: cloudve
    chart: galaxy
    display_name: Galaxy
    summary: |
      Perform repeatable, interactive analysis using a graphical tool interface, choosing from popular
      tools and workflows, aided by online training material and collaboration.
    description: |
      <a href="https://galaxyproject.org/">Galaxy</a> is an open, web-based platform for
      accessible, reproducible, and transparent computational biomedical research. Perform repeatable, interactive
      analysis using a graphical tool interface, choosing from popular tools and workflows, aided by online training
      material and collaboration.
    maintainers: Galaxy Team
    info_url: https://galaxyproject.org/
    icon_url: https://galaxyproject.org/images/galaxy-logos/galaxy_project_logo_square.png
    screenshot_url: assets/images/screenshot_galaxy.png
    context:
      admin_users: cloudman@someplace.org
    template: |
      image:
        repository: galaxy/galaxy-k8s
      cvmfs:
        enabled: true
        deploy: false
      persistence:
        storageClass: nfs
      postgresql:
        deploy: false
        postgresqlPassword: "{{ random_alphanumeric(10) }}"
        postgresqlPostgresPassword: "{{ random_alphanumeric(10) }}"
        persistence:
          storageClass: ebs
      influxdb:
        enabled: true
        url: "{{context.global.influxdb_url}}"
        username: "{{context.global.influxdb_username}}"
        password: "{{context.global.influxdb_password}}"
        database: "{{context.global.influxdb_database}}"
      ingress:
        enabled: true
        annotations:
           kubernetes.io/tls-acme: "true"
           cert-manager.io/cluster-issuer: letsencrypt-prod
           nginx.ingress.kubernetes.io/secure-backends: "true"
           nginx.ingress.kubernetes.io/proxy-buffer-size: 128k
        hosts:
          - host: ~
            paths:
              - path: "{{context.project.access_path}}/galaxy"
          {%- if not (context.global.domain | ipaddr) %}
          - host: "{{ context.global.domain }}"
            paths:
              - path: "{{context.project.access_path}}/galaxy"
          {%- endif %}
        tls:
           - secretName: "{{context.global.domain | replace('.', '-') }}-key"
             hosts:
               - "{{context.global.domain}}"
        path: {{context.project.access_path}}/galaxy
        access_path: {{context.project.access_path}}/galaxy/
      configs:
        oidc_config.xml: |
          <?xml version="1.0"?>
          <OIDC>
              <Setter Property="VERIFY_SSL" Value="False" Type="bool"/>
              <Setter Property="REQUESTS_TIMEOUT" Value="3600" Type="float"/>
              <Setter Property="ID_TOKEN_MAX_AGE" Value="3600" Type="float"/>
          </OIDC>
        oidc_backends_config.xml: |
          <?xml version="1.0"?>
          <OIDC>
              <provider name="keycloak">
                  <url>https://{{context.global.domain}}/auth/realms/gvl</url>
                  <client_id>{{context.project.oidc_client_id}}</client_id>
                  <client_secret>{{context.project.oidc_client_secret}}</client_secret>
                  <redirect_uri>https://{{context.global.domain}}{{context.project.access_path}}/galaxy/authnz/keycloak/callback</redirect_uri>
                  <enable_idp_logout>true</enable_idp_logout>
              </provider>
          </OIDC>
        auth_conf.xml: |
            <auth>
            </auth>
        galaxy.yml:
          galaxy:
            library_import_dir: /gvl
            user_library_import_dir: /gvl
            admin_users: {{context.admin_users}}
            allow_path_paste: true
            enable_oidc: true
            oidc_config_file: /galaxy/server/config/oidc_config.xml
            oidc_backends_config_file: /galaxy/server/config/oidc_backends_config.xml
            auth_config_file: /galaxy/server/config/auth_conf.xml
            require_login: true
            session_duration: 30

      extraVolumes:
        - name: project-data
          persistentVolumeClaim:
            claimName: "{{context.project.namespace}}-project-data-pvc"
        - name: public-data
          persistentVolumeClaim:
            claimName: "{{context.project.namespace}}-public-data-pvc"

      extraVolumeMounts:
        - name: project-data
          mountPath: /gvl/projects/current
        - name: public-data
          mountPath: /gvl/public

  jupyter:
    repo: jupyterhub
    chart: jupyterhub
    display_name: Jupyter
    summary: Mix code with text in an interactive shell using Python and Markdown.
    description: |
      <a href="https://jupyter.org/">JupyterHub</a> can be used to access your personal
      <a href="http://ipython.org/notebook.html">IPython Notebook</a>.
      IPython Notebook is a web-based interactive computational environment where you can
      combine code execution, text, mathematics, plots and rich media into a single document.
    maintainers: JupyterHub
    info_url: https://jupyter.org/
    icon_url: https://jupyter.org/assets/hublogo.svg
    screenshot_url: assets/images/screenshot_jupyter.png
    template: |
      ingress:
        access_path: "{{context.project.access_path}}/jupyterhub/oauth_login"
        enabled: true
        path: "{{ context.project.access_path}}/jupyterhub"
        hosts:
          - ~
          {%- if not (context.global.domain | ipaddr) %}
          - "{{ context.global.domain }}"
          {%- endif %}

      auth:
        type: custom
        custom:
          className: oauthenticator.generic.GenericOAuthenticator
          config:
            login_service: "keycloak"
            client_id: "{{context.project.oidc_client_id}}"
            client_secret: "{{context.project.oidc_client_secret}}"
            token_url: "https://{{context.global.domain}}/auth/realms/gvl/protocol/openid-connect/token"
            userdata_url: "https://{{context.global.domain}}/auth/realms/gvl/protocol/openid-connect/userinfo"
            userdata_method: GET
            username_key: preferred_username

      hub:
        baseUrl: "{{context.project.access_path}}/jupyterhub"
        extraEnv:
          - name: OAUTH2_AUTHORIZE_URL
            value: "https://{{context.global.domain}}/auth/realms/gvl/protocol/openid-connect/auth"
          - name: OAUTH2_TOKEN_URL
            value: "https://{{context.global.domain}}/auth/realms/gvl/protocol/openid-connect/token"
          - name: OAUTH_CALLBACK_URL
            value: "https://{{context.global.domain}}{{context.project.access_path}}/jupyterhub/hub/oauth_callback"

      proxy:
        secretToken: "{{random_alphanumeric(65)}}"

      singleuser:
        storage:
          type: dynamic
          dynamic:
            storageClass: nfs
            accessMode: ["ReadWriteMany"]
            size: 10Gi
          extraVolumes:
            - name: notebook-conf
              configMap:
                name: {{context.project.namespace}}-projman-configs
                items:
                  - key: "jupyter_notebook_config.py"
                    path: "jupyter_notebook_config.py"
            - name: project-data
              persistentVolumeClaim:
                claimName: "{{context.project.namespace}}-project-data-pvc"
            - name: public-data
              persistentVolumeClaim:
                claimName: "{{context.project.namespace}}-public-data-pvc"

          extraVolumeMounts:
            - name: public-data
              mountPath: "/gvl/public"
            - name: project-data
              mountPath: "/gvl/projects/current"
            - name: notebook-conf
              mountPath: /etc/jupyter/

  rstudio:
    repo: cloudve
    chart: rstudio
    display_name: RStudio
    summary: |
      Use advanced statistical and visualization packages from Bioconductor through a powerful RStudio interface.
    description: |
      <a href="https://rstudio.com//">RStudio</a> can be used to access your personal
      RStudio environment. Use advanced statistical and visualization packages from Bioconductor through the powerful
      RStudio interface.
    maintainers: RStudio Inc.
    info_url: https://rstudio.com/
    icon_url: https://www.r-project.org/Rlogo.png
    screenshot_url: assets/images/screenshot_rstudio.png
    context:
      starting_dir: "/gvl"
    template: |
      oidc:
        client_id: "{{context.project.oidc_client_id}}"
        client_secret: {{context.project.oidc_client_secret}}
        discovery_url: https://{{context.global.domain}}/auth/realms/gvl
      ingress:
        access_path: "{{context.project.access_path}}/rstudio/"
        hosts:
          - host: ~
            paths:
              - {{context.project.access_path}}/rstudio(/|$)(.*)
          {%- if not (context.global.domain | ipaddr) %}
          - host: {{context.global.domain}}
            paths:
              - {{context.project.access_path}}/rstudio(/|$)(.*)
          {%- endif %}

      extraVolumes:
        - name: rstudio-conf
          configMap:
            name: {{context.project.namespace}}-projman-configs
            items:
              - key: "rserver.conf"
                path: "rserver.conf"
        - name: project-data
          persistentVolumeClaim:
            claimName: "{{context.project.namespace}}-project-data-pvc"
        - name: public-data
          persistentVolumeClaim:
            claimName: "{{context.project.namespace}}-public-data-pvc"

      extraVolumeMounts:
        - name: public-data
          mountPath: "/gvl/public"
        - name: project-data
          mountPath: "/gvl/projects/current"
        - name: rstudio-conf
          mountPath: /etc/rstudio

      persistence:
        storageClass: nfs
        size: 10Gi

      mutableConfigs:
        - fileName: user-settings
          contents: |+
            initialWorkingDirectory={{context.starting_dir}}

          subPath: ".rstudio/monitored/user-settings/"

  terminalman:
    repo: cloudve
    chart: terminalman
    display_name: Project Terminal
    summary: TerminalMan brings the power of a terminal to users
    maintainers: Gnu Project
    info_url: https://www.gnu.org/software/bash/
    icon_url: https://upload.wikimedia.org/wikipedia/commons/8/82/Gnu-bash-logo.svg
    screenshot_url: assets/images/screenshot_terminal.png
    context:
      starting_dir: "/gvl"
    template: |
      oidc:
        client_id: "{{context.project.oidc_client_id}}"
        client_secret: {{context.project.oidc_client_secret}}
        discovery_url: https://{{context.global.domain}}/auth/realms/gvl
      ingress:
        access_path: {{context.project.access_path}}/terminalman/
        hosts:
          - host: ~
            paths:
              - {{context.project.access_path}}/terminalman
          {%- if not (context.global.domain | ipaddr) %}
          - host: {{context.global.domain}}
            paths:
              - {{context.project.access_path}}/terminalman
          {%- endif %}

      persistence:
        enabled: false

      extraVolumes:
        - name: project-data
          persistentVolumeClaim:
            claimName: "{{context.project.namespace}}-project-data-pvc"
        - name: public-data
          persistentVolumeClaim:
            claimName: "{{context.project.namespace}}-public-data-pvc"

      extraVolumeMounts:
        - name: public-data
          mountPath: "/gvl/public"
        - name: project-data
          mountPath: "/gvl/projects/current"

      initialWorkingDir: "{{context.starting_dir}}"
